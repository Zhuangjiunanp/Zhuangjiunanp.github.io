<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>English Learning Resources</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      line-height: 1.6;
      color: #000;
      background-color: #fff;
    }
    .file-list {
      margin: 20px 0;
    }
    .file-item {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    .file-item a {
      text-decoration: none;
      color: #000;
    }
    .file-item a:hover {
      text-decoration: underline;
    }
    .loading {
      text-align: center;
      padding: 40px;
    }
  </style>
</head>

<body>
  <div id="navigation">
    <h1>ğŸ“š English Learning Resources</h1>
    <p>Available files and materials:</p>
  </div>
  <div id="listing">
    <div class="loading">Loading file list...</div>
  </div>

  <script>
    // GitHubä»“åº“ä¿¡æ¯
    const repoOwner = 'zhuangjiunanp';
    const repoName = 'zhuangjiunanp.github.io';
    const folderPath = 'english';
    
    // å…¼å®¹IEçš„AJAXå‡½æ•°
    function makeRequest(url, callback) {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          callback(JSON.parse(xhr.responseText));
        }
      };
      xhr.open('GET', url, true);
      xhr.send();
    }
    
    // è·å–æ–‡ä»¶åˆ—è¡¨
    function loadFileList() {
      var apiUrl = 'https://api.github.com/repos/' + repoOwner + '/' + repoName + '/contents/' + folderPath;
      
      makeRequest(apiUrl, function(files) {
        var listingEl = document.getElementById('listing');
        var html = '<div class="file-list">';
        
        files.forEach(function(file) {
          if (file.name !== 'index.html' && file.type === 'file') {
            html += '<div class="file-item">';
            html += '<a href="' + file.name + '">' + file.name + '</a>';
            html += ' <small>(' + (file.size / 1024).toFixed(1) + ' KB)</small>';
            html += '</div>';
          }
        });
        
        html += '</div>';
        
        if (files.length <= 1) { // åªæœ‰index.html
          html = '<p>No files found. Please upload files to the english folder.</p>';
        }
        
        listingEl.innerHTML = html;
      });
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    if (window.addEventListener) {
      window.addEventListener('load', loadFileList);
    } else {
      window.attachEvent('onload', loadFileList); // IEå…¼å®¹
    }
  </script>
</body>
</html>
